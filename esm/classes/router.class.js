const a25_0x2babe7=a25_0x2d96;function a25_0x2d96(_0x248a60,_0x383939){const _0x11ed1e=a25_0x11ed();return a25_0x2d96=function(_0x2d9682,_0x23bfe6){_0x2d9682=_0x2d9682-0x14f;let _0x9d41b1=_0x11ed1e[_0x2d9682];return _0x9d41b1;},a25_0x2d96(_0x248a60,_0x383939);}(function(_0x31d87a,_0x1fc3b9){const _0x201e34=a25_0x2d96,_0x4394d7=_0x31d87a();while(!![]){try{const _0x47e3f8=parseInt(_0x201e34(0x188))/0x1+parseInt(_0x201e34(0x153))/0x2*(parseInt(_0x201e34(0x17a))/0x3)+-parseInt(_0x201e34(0x193))/0x4*(parseInt(_0x201e34(0x15c))/0x5)+-parseInt(_0x201e34(0x159))/0x6+parseInt(_0x201e34(0x15b))/0x7*(parseInt(_0x201e34(0x17f))/0x8)+parseInt(_0x201e34(0x15f))/0x9+parseInt(_0x201e34(0x191))/0xa*(-parseInt(_0x201e34(0x167))/0xb);if(_0x47e3f8===_0x1fc3b9)break;else _0x4394d7['push'](_0x4394d7['shift']());}catch(_0x587f0c){_0x4394d7['push'](_0x4394d7['shift']());}}}(a25_0x11ed,0xc7be6));var __awaiter=this&&this['__awaiter']||function(_0x376d11,_0x3624d4,_0x205388,_0x2416d5){function _0xb953aa(_0x3f7ddb){return _0x3f7ddb instanceof _0x205388?_0x3f7ddb:new _0x205388(function(_0x10db07){_0x10db07(_0x3f7ddb);});}return new(_0x205388||(_0x205388=Promise))(function(_0x10f095,_0xa1edd5){const _0x19b78c=a25_0x2d96;function _0x177f05(_0x56651d){const _0x43e467=a25_0x2d96;try{_0x2bcce4(_0x2416d5[_0x43e467(0x162)](_0x56651d));}catch(_0x49e13c){_0xa1edd5(_0x49e13c);}}function _0x446813(_0x1cf052){try{_0x2bcce4(_0x2416d5['throw'](_0x1cf052));}catch(_0x2cacf4){_0xa1edd5(_0x2cacf4);}}function _0x2bcce4(_0x4e69c1){const _0x506602=a25_0x2d96;_0x4e69c1[_0x506602(0x18a)]?_0x10f095(_0x4e69c1[_0x506602(0x16c)]):_0xb953aa(_0x4e69c1[_0x506602(0x16c)])[_0x506602(0x168)](_0x177f05,_0x446813);}_0x2bcce4((_0x2416d5=_0x2416d5['apply'](_0x376d11,_0x3624d4||[]))[_0x19b78c(0x162)]());});};import a25_0x36acba from'../exceptions/express.exception';import a25_0xbb611e from'fs';import a25_0x36df67 from'path';function a25_0x11ed(){const _0x6e7f4d=['some','readdirSync','8482428qlFYFK','handler','call','next','registerFrom','startsWith','handle','Cannot\x20get\x20the\x20Express\x20class\x20reference','5335zRltjr','then','method','url','beforeRoute','value','name','controllers','patch','urlPattern','replace','DELETE','expressRef','default','Not\x20found','middlewares','push','unshift','length','1433463lYXHQr','catch','get','fromController','No\x20handlers\x20found','60176nQWEqj','use','prototype','OPTIONS','POST','express','corsRoute','([^/]+)','GET','923993KdyNlk','put','done','params','slice','filter','options','join','function','28280kRLtjp','getMetadata','4USQljQ','test','reduce','onError','delete','routes','2ouljox','register','afterRoute','Bad\x20Request','PATCH','string','850434lLWnbL','PUT','434vpsSdq','2396005nmzDnk'];a25_0x11ed=function(){return _0x6e7f4d;};return a25_0x11ed();}export default class Router{constructor(){const _0x405e21=a25_0x2d96;this[_0x405e21(0x176)]=[],this[_0x405e21(0x173)]={};}['use'](..._0x117120){const _0x1bef00=a25_0x2d96;let _0x59ff50='*',_0x462560='*',_0x2a1588=[];if(_0x117120[_0x1bef00(0x179)]>0x2&&typeof _0x117120[0x0]==='string'&&typeof _0x117120[0x1]===_0x1bef00(0x158))_0x59ff50=_0x117120[0x0],_0x462560=_0x117120[0x1],_0x2a1588=_0x117120[_0x1bef00(0x18c)](0x2);else{if(_0x117120[_0x1bef00(0x179)]>0x1&&typeof _0x117120[0x0]===_0x1bef00(0x158)&&typeof _0x117120[0x1]!==_0x1bef00(0x158))_0x462560=_0x117120[0x0],_0x2a1588=_0x117120[_0x1bef00(0x18c)](0x1);else _0x117120['every'](_0x2f862c=>typeof _0x2f862c===_0x1bef00(0x190)||_0x2f862c instanceof Router)&&(_0x2a1588=_0x117120);}if(_0x2a1588[_0x1bef00(0x179)]===0x0)throw new Error(_0x1bef00(0x17e));if(_0x59ff50==='*'&&_0x462560==='*'&&_0x2a1588[_0x1bef00(0x179)]===0x1&&typeof _0x2a1588[0x0]==='function'&&_0x2a1588[0x0]['length']===0x4){const _0x2534fb=_0x2a1588[0x0];if(this[_0x1bef00(0x173)][_0x1bef00(0x184)]==undefined)throw new Error('Cannot\x20get\x20the\x20Express\x20class\x20reference');this['expressRef'][_0x1bef00(0x184)][_0x1bef00(0x150)]=(_0x46fcea,_0x5433c6,_0x936902)=>{const _0x157d0a=_0x1bef00;return _0x2534fb['call'](this[_0x157d0a(0x173)]['express'],_0x936902,_0x46fcea,_0x5433c6,()=>{});};return;}const _0x270c9a=[];for(const _0x2a832a of _0x2a1588)if(_0x2a832a instanceof Router)_0x2a832a[_0x1bef00(0x173)]=this[_0x1bef00(0x173)];this[_0x1bef00(0x176)][_0x1bef00(0x177)]({'method':_0x59ff50,'paramKeys':_0x270c9a,'handlers':_0x2a1588,'urlPattern':_0x462560==='*'?undefined:new RegExp('^'+_0x462560[_0x1bef00(0x171)](/:([\w]+)/g,(_0x2c9350,_0x338cf9)=>{const _0x307df6=_0x1bef00;return _0x270c9a[_0x307df6(0x177)](_0x338cf9),_0x307df6(0x186);})[_0x1bef00(0x171)](/\//g,'\x5c/')+(_0x2a1588[_0x1bef00(0x15d)](_0x5d34fb=>_0x5d34fb instanceof Router)?'':'$'))});}['register'](_0x2e291c){const _0x34f274=a25_0x2d96,[_0x15b618,_0x2eb27e]=Router[_0x34f274(0x17d)](_0x2e291c);this[_0x34f274(0x180)](_0x15b618,_0x2eb27e);}[a25_0x2babe7(0x163)](){const _0x41105a=a25_0x2babe7;return __awaiter(this,arguments,void 0x0,function*(_0x4667bc=a25_0x36df67[_0x41105a(0x18f)](__dirname,_0x41105a(0x16e)),_0x20eae8=/\.controller\.(ts|js)$/i){const _0x4524c5=_0x41105a,_0x227550=a25_0xbb611e[_0x4524c5(0x15e)](_0x4667bc),_0x87a4ab=_0x227550[_0x4524c5(0x18d)](_0x17648d=>_0x20eae8[_0x4524c5(0x194)](_0x17648d));for(const _0x3e178b of _0x87a4ab){const _0x4dd0cd=a25_0x36df67[_0x4524c5(0x18f)](_0x4667bc,_0x3e178b),_0x4b0cfd=yield import(_0x4dd0cd),_0x2d7324=_0x4b0cfd[_0x4524c5(0x174)];this[_0x4524c5(0x154)](_0x2d7324);}});}[a25_0x2babe7(0x165)](_0x125c28,_0x5645de){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x317e1a=a25_0x2d96;try{let {method:_0x278c80,baseUrl:_0x4a36e7}=_0x125c28;if(_0x278c80==undefined||_0x4a36e7==undefined)throw new a25_0x36acba(_0x317e1a(0x156),0x190);_0x4a36e7=(_0x4a36e7[_0x317e1a(0x164)]('/')?'':'/')+_0x4a36e7;let _0x274772=![];for(const _0x538a4c of this[_0x317e1a(0x176)]){if(_0x538a4c[_0x317e1a(0x169)]!==_0x278c80&&_0x538a4c[_0x317e1a(0x169)]!=='*'||_0x538a4c[_0x317e1a(0x170)]!==undefined&&!_0x538a4c[_0x317e1a(0x170)][_0x317e1a(0x194)](_0x4a36e7))continue;_0x274772=!![];if(_0x538a4c[_0x317e1a(0x170)]!=undefined){const _0x41a301=_0x538a4c['urlPattern']['exec'](_0x4a36e7),_0x33200c=_0x41a301?_0x538a4c['paramKeys'][_0x317e1a(0x14f)]((_0x5dc7a0,_0x4df9e4,_0x25f161)=>{return _0x5dc7a0[_0x4df9e4]=_0x41a301[_0x25f161+0x1],_0x5dc7a0;},{}):{};_0x125c28[_0x317e1a(0x18b)]=Object['assign'](Object['assign']({},_0x125c28[_0x317e1a(0x18b)]),_0x33200c);}for(const _0x3a2fa5 of _0x538a4c['handlers']){if(_0x538a4c[_0x317e1a(0x170)]!=undefined)_0x125c28['baseUrl']=_0x4a36e7['replace'](_0x538a4c[_0x317e1a(0x170)],'');if(_0x3a2fa5 instanceof Router){const _0x29a0be=yield _0x3a2fa5['handle'](_0x125c28,_0x5645de);if(_0x29a0be!==!![])return![];continue;}const _0x871453=yield new Promise((_0x4bf088,_0x25e90a)=>{const _0x30cd95=_0x317e1a;try{const _0x539ee3=_0x3a2fa5(_0x125c28,_0x5645de,_0x376591=>{if(_0x376591!=undefined)return _0x25e90a(_0x376591);_0x4bf088(!![]);});if(_0x539ee3 instanceof Promise)_0x539ee3[_0x30cd95(0x168)](_0x4bf088)[_0x30cd95(0x17b)](_0x25e90a);else _0x4bf088(_0x539ee3);}catch(_0x1cdcef){_0x25e90a(_0x1cdcef);}});if(_0x871453!==!![])return![];}}if(!_0x274772)throw new a25_0x36acba(_0x317e1a(0x175),0x194);return!![];}catch(_0x55720b){if(this['expressRef'][_0x317e1a(0x184)]==undefined)throw new Error(_0x317e1a(0x166));return yield this['expressRef'][_0x317e1a(0x184)][_0x317e1a(0x150)][_0x317e1a(0x161)](this[_0x317e1a(0x173)][_0x317e1a(0x184)],_0x125c28,_0x5645de,_0x55720b),![];}});}[a25_0x2babe7(0x17c)](..._0x436732){const _0x2a1086=a25_0x2babe7;let _0x3114c2='*',_0x1f85c5=_0x436732;return _0x436732[_0x2a1086(0x179)]>0x1&&typeof _0x436732[0x0]===_0x2a1086(0x158)&&(_0x3114c2=_0x436732[0x0],_0x1f85c5=_0x436732[_0x2a1086(0x18c)](0x1)),this[_0x2a1086(0x180)](_0x2a1086(0x187),_0x3114c2,..._0x1f85c5);}['post'](..._0x2de756){const _0x1e4bbc=a25_0x2babe7;let _0x400c90='*',_0x4f7977=_0x2de756;_0x2de756[_0x1e4bbc(0x179)]>0x1&&typeof _0x2de756[0x0]===_0x1e4bbc(0x158)&&(_0x400c90=_0x2de756[0x0],_0x4f7977=_0x2de756[_0x1e4bbc(0x18c)](0x1)),this[_0x1e4bbc(0x180)](_0x1e4bbc(0x183),_0x400c90,..._0x4f7977);}[a25_0x2babe7(0x189)](..._0xcd0646){const _0x2d0a45=a25_0x2babe7;let _0x470980='*',_0x309fb5=_0xcd0646;_0xcd0646[_0x2d0a45(0x179)]>0x1&&typeof _0xcd0646[0x0]===_0x2d0a45(0x158)&&(_0x470980=_0xcd0646[0x0],_0x309fb5=_0xcd0646[_0x2d0a45(0x18c)](0x1)),this['use'](_0x2d0a45(0x15a),_0x470980,..._0x309fb5);}[a25_0x2babe7(0x16f)](..._0x5173ea){const _0x42cff2=a25_0x2babe7;let _0x4ae37d='*',_0x34a551=_0x5173ea;_0x5173ea[_0x42cff2(0x179)]>0x1&&typeof _0x5173ea[0x0]===_0x42cff2(0x158)&&(_0x4ae37d=_0x5173ea[0x0],_0x34a551=_0x5173ea[_0x42cff2(0x18c)](0x1)),this[_0x42cff2(0x180)](_0x42cff2(0x157),_0x4ae37d,..._0x34a551);}[a25_0x2babe7(0x18e)](..._0x4225c3){const _0x3143be=a25_0x2babe7;let _0x24ce2b='*',_0x5245e7=_0x4225c3;_0x4225c3['length']>0x1&&typeof _0x4225c3[0x0]==='string'&&(_0x24ce2b=_0x4225c3[0x0],_0x5245e7=_0x4225c3[_0x3143be(0x18c)](0x1)),this['use'](_0x3143be(0x182),_0x24ce2b,..._0x5245e7);}[a25_0x2babe7(0x151)](..._0x5a3e68){const _0x5da447=a25_0x2babe7;let _0x1e2e98='*',_0x2582e3=_0x5a3e68;_0x5a3e68[_0x5da447(0x179)]>0x1&&typeof _0x5a3e68[0x0]===_0x5da447(0x158)&&(_0x1e2e98=_0x5a3e68[0x0],_0x2582e3=_0x5a3e68[_0x5da447(0x18c)](0x1)),this[_0x5da447(0x180)](_0x5da447(0x172),_0x1e2e98,..._0x2582e3);}static[a25_0x2babe7(0x17d)](_0x2e82d2){const _0x373b55=a25_0x2babe7,_0x2ac142=Reflect[_0x373b55(0x192)](_0x373b55(0x16a),_0x2e82d2),_0x494d17=Reflect[_0x373b55(0x192)]('routes',_0x2e82d2)||Reflect['getMetadata'](_0x373b55(0x152),_0x2e82d2['prototype'])||[],_0xdb8881=new Router();for(const _0x2d0260 of _0x494d17){const _0x2bf04a=Reflect[_0x373b55(0x192)]('beforeRoute',_0x2e82d2,_0x2d0260[_0x373b55(0x160)][_0x373b55(0x16d)])||Reflect[_0x373b55(0x192)](_0x373b55(0x16b),_0x2e82d2[_0x373b55(0x181)],_0x2d0260[_0x373b55(0x160)][_0x373b55(0x16d)])||[],_0x3bfe0b=Reflect[_0x373b55(0x192)](_0x373b55(0x155),_0x2e82d2,_0x2d0260[_0x373b55(0x160)][_0x373b55(0x16d)])||Reflect[_0x373b55(0x192)](_0x373b55(0x155),_0x2e82d2[_0x373b55(0x181)],_0x2d0260[_0x373b55(0x160)][_0x373b55(0x16d)])||[],_0x16a06b=Reflect[_0x373b55(0x192)]('corsRoute',_0x2e82d2,_0x2d0260[_0x373b55(0x160)][_0x373b55(0x16d)])||Reflect[_0x373b55(0x192)](_0x373b55(0x185),_0x2e82d2[_0x373b55(0x181)],_0x2d0260['handler'][_0x373b55(0x16d)]);_0x16a06b!=undefined&&(_0xdb8881[_0x373b55(0x180)](_0x373b55(0x182),_0x2d0260['url'],_0x16a06b),_0x2bf04a[_0x373b55(0x178)](_0x16a06b)),_0xdb8881[_0x373b55(0x180)](_0x2d0260[_0x373b55(0x169)],_0x2d0260[_0x373b55(0x16a)],...[..._0x2bf04a,_0x2d0260['handler'],..._0x3bfe0b]);}return[_0x2ac142,_0xdb8881];}}